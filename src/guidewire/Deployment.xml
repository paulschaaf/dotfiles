<?xml version="1.0" ?>

<project
	name="ClaimCenter Deployment"
	default="Manage"
	basedir=".">
	<description>
		Quick management of deployed application by Paul Schaaf 01/16/07
	</description>

	<property file="browse.properties" />
	<property file="bin/registry.properties" />
	<property file="toolkit/bin/server.properties" />

	<property
		name="browser.default"
		value="explorer" />

	<property
		name="browser.tomcat.admin"
		value="${browser.default}"/>
	<property
		name="browser.args"
		value="${browser.tomcat.args}"/>


	<!--	#######
		########## Web pages
	-->

	<target
		name="Manage"
		description="Manage the application in a running tomcat">
		<!-- This requires you to add the following to <tomcat-dir>\conf\tomcat-users.xml:
			<role rolename="manager"/>
			<role rolename="admin"/>
			<user username="su" password="gw" roles="admin,manager"/>
		-->
		<property
			name="browser"
			value="${browser.tomcat.admin}"/>
		<property
			name="tomcat.cmd"
			value="" />
		<condition
			property="url.tail"
			value="/${tomcat.cmd}?path=/ab">
			<not>
				<equals
					arg1="${tomcat.cmd}"
					arg2=""/>
			</not>
		</condition>
		<property
			name="url.tail"
			value="" />

		<property
			name="url"
			value="${server.url}/../manager/html${url.tail}" />
		<ant
			antfile="Browse.xml"
			target="browse"
			inheritall="true" />
	</target>

	<target
		name="Start"
		description="Start the application in a running tomcat">
		<antcall target="Manage">
			<param
				name="tomcat.cmd"
				value="start" />
		</antcall>
	</target>

	<target
		name="Reload"
		description="Reload the application without stopping tomcat itself">
		<antcall target="Manage">
			<param
				name="tomcat.cmd"
				value="reload" />
		</antcall>
	</target>

	<target
		name="Stop"
		description="Stop the application without stopping tomcat itself">
		<antcall target="Manage">
			<param
				name="tomcat.cmd"
				value="stop" />
		</antcall>
	</target>

	<target
		name="Undeploy"
		description="Undeploy the application without stopping tomcat itself">
		<antcall target="Manage">
			<param
				name="tomcat.cmd"
				value="undeploy" />
		</antcall>
	</target>

</project>