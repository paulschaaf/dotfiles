
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
      <title>4.17.&nbsp;Matching case-insensitive attribute values [Dive Into Greasemonkey]</title>
      <link rel="shortcut icon" href="/favicon.ico">
      <link rel="stylesheet" href="../css/dig.css" type="text/css">
      <meta http-equiv="Link" content='&lt;../css/modern.css&gt;; type="text/css"; rel=stylesheet, &lt;../css/empty.css&gt;; type="text/css";
      rel=stylesheet'>
      <link rev="made" href="mailto:mark@diveintomark.org">
      <meta name="generator" content="DocBook XSL Stylesheets V1.68.1">
      <meta name="keywords" content="Firefox, Greasemonkey, Javascript, user script, userscript">
      <link rel="start" href="../toc/index.html" title="Dive Into Greasemonkey">
      <link rel="up" href="index.html" title="Chapter&nbsp;4.&nbsp;Common Patterns">
      <link rel="prev" href="onload.html" title="4.16.&nbsp;Post-processing a page after it renders">
      <link rel="next" href="get-domain.html" title="4.18.&nbsp;Getting the current domain name">
   </head>
   <body id="diveintogreasemonkey-org" class="pattern-caseinsensitive">
      <div class="z" id="intro">
         <div class="sectionInner">
            <div class="sectionInner2">
               <div class="s">
                  <h1><a href="/" accesskey="1">Dive Into Greasemonkey</a></h1>
                  <p>Teaching an old web new tricks</p>
               </div>
               <div class="s">
                  <ul>
                     <li><a href="../">Home</a> &middot; 
                     </li>
                     <li><a href="../toc/">Table of contents</a> &middot; 
                     </li>
                     <li><a href="../download/">Download</a> &middot; 
                     </li>
                     <li><a href="http://greasemonkey.mozdev.org/">Get Greasemonkey</a></li>
                  </ul>
               </div>
            </div>
         </div>
      </div>
      <div id="main">
         <div id="mainInner">
            <p id="breadcrumb">You are here: <a href="../">Home</a> &#8594; <a href="../toc/index.html">Table of contents</a> &#8594; <a href="index.html">Common Patterns</a> &#8594; <span class="thispage">Matching case-insensitive attribute values</span></p>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title"><a name="pattern.caseinsensitive" class="skip" href="#pattern.caseinsensitive" title="link to this section"><img src="../images/permalink.gif" alt="[link]" title="link to this section" width="8" height="9"></a> 4.17.&nbsp;Matching case-insensitive attribute values
                        </h2>
                     </div>
                     <div>
                        <div class="abstract">
                           <h3 class="title"></h3>
                           <p>Many attribute values in <acronym title="HyperText Markup Language">HTML</acronym> are case-insensitive.  Many can also contain leading and trailing spaces.  If you want to find all variations, you need to
                              do a little legwork in your XPath queries.
                           </p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="example"><a name="example.pattern.caseinsensitive" class="skip" href="#example.pattern.caseinsensitive" title="link to this example"><img src="../images/permalink.gif" alt="[link]" title="link to this example" width="8" height="9"></a> 
                  <h3 class="title">Example:&nbsp;Find all forms whose method is "POST" or "post"</h3><pre class="programlisting ">var postforms = document.evaluate(
    "//form[translate(@method, 'POST ', 'post')='post']",
    document,
    null,
    XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,
    null);</pre><p>This XPath query finds forms that submit with a POST method.  First, we need to translate the <code class="sgmltag-attribute">method</code> attribute to lowercase, using the <code class="function">translate</code> function to convert uppercase letters to lowercase.  (XPath 2.0 has a <code class="function">lowercase</code> function, but I didn't have any success using it.)  Second, we need to strip leading and trailing spaces.  We can incorporate
                     this into our call to the <code class="function">translate</code> function by including an extra space in the first argument.  Since there is no corresponding letter in the second argument,
                     all spaces are stripped.  Finally, we can compare the resulting attribute value to <code class="literal">'post'</code>.
                  </p>
               </div>
               <div class="usedby">
                  <h3>Real examples</h3>
                  <ul>
                     <li><a href="http://diveintogreasemonkey.org/download/forceget.user.js">ForceGet</a></li>
                  </ul>
               </div>
            </div>
            <div style="float: left">&#8592;&nbsp;<a class="NavigationArrow" href="onload.html">Post-processing a page after it renders</a></div>
            <div style="text-align: right"><a class="NavigationArrow" href="get-domain.html">Getting the current domain name</a>&nbsp;&#8594;
            </div>
            <hr style="clear:both">
            <div class="footer">
               <p class="copyright">Copyright &copy; 2005 Mark Pilgrim &middot; <a title="send me feedback about this book" href="mailto:mark@diveintomark.org">mark@diveintomark.org</a> &middot; <a href="../license/gpl.html" title="GNU General Public License">Terms of use</a></p>
            </div>
         </div>
      </div>
   </body>
</html>