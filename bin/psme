#!/bin/sh

if [ "$1" = "--echo" ]
then
    echo=true
    shift
fi

switches='-lu'
#filter="awk '\$1 != $$ && \$2 != $$'"
filter="grep -v '^\(\| *[0-9]*\) *$$'"
case `uname`
in
    CYGWIN*)
        switches="$switches $LOGNAME"
        ;;

    Linux*)
        switches="-u $LOGNAME -o pid,ppid,tty,s,stime,pcpu,pmem,nice,args"
        ;;

    SunOS*)
        ;;

#     -h|--help|
    *)
        ;;

esac

cmd="ps $switches $@"

if [ -n "$filter" ]
then
    cmd="$cmd | $filter"
fi

if [ -z "$echo" ]
then
    eval $cmd
else
    echo $cmd
fi
